# OPFData: Large-scale datasets for AC optimal power flow with topological perturbations

**Date:** 2024-6-11

**Authors:** Sean Lovett¹,*, Miha Zgubič¹,*, Sofia Liguori¹, Sephora Madjiheurem¹, Hamish Tomlinson¹, Sophie Elster¹, Chris Apps¹, Sims Witherspoon¹ and Luis Piloto¹

¹Google DeepMind, *Equal contribution

## Abstract

Solving the AC optimal power flow problem (AC-OPF) is critical to the efficient and safe planning and operation of power grids. Small efficiency improvements in this domain have the potential to lead to billions of dollars of cost savings, and significant reductions in emissions from fossil fuel generators. Recent work on data-driven solution methods for AC-OPF shows the potential for large speed improvements compared to traditional solvers; however, no large-scale open datasets for this problem exist. We present the largest readily-available collection of solved AC-OPF problems to date. This collection is orders of magnitude larger than existing readily-available datasets, allowing training of high-capacity data-driven models. Uniquely, it includes topological perturbations - a critical requirement for usage in realistic power grid operations. We hope this resource will spur the community to scale research to larger grid sizes with variable topology.

> The OPFData datasets are distributed as JSON files in a public Google Cloud bucket `gridopt-dataset` along with the LICENSE and README files.

## 1. Introduction

Power grids are among the largest, most complex, and most critical pieces of infrastructure. They are also major contributors to greenhouse gas emissions, with the global power sector accounting for almost 40% of all energy-related CO₂ emissions [1]. Operating power grids efficiently and securely requires solving variants of the alternating current optimal power flow (AC-OPF) problem to determine optimal unit commitment, power dispatch, and related quantities, subject to physical constraints, and often subject to preventative security constraints [2]. In its general form this is a non-linear, non-convex, mixed-integer constrained optimisation problem. Typical methods for solving such problems are too computationally expensive or lack sufficient robustness for real-time application on large grids, necessitating the use of approximate formulations such as the linearised DC-OPF [3, 4]. Approximate formulations are robust and fast to solve but can introduce substantial inefficiencies, both economic [5] and emissions-related [6], and typically violate the true constraints of the power network [7], requiring further post-processing which can degrade optimality of the solution. Higher penetration of renewable generation is expected to increase the difficulty of these problems, as it leads to lower-inertia grids and a higher reliance on uncertain intermittent generation [8, 9, 10], as well as increased grid congestion requiring balancing actions [11].

There is therefore the potential for substantial economic, security, and emissions benefits from solving true AC-OPF formulations rather than approximations. This is also a particularly high-leverage area for applying machine learning to tackle climate change [12]. Machine learning (ML)-based approaches for solving OPF have attracted interest due to their potential for important speed improvements on a variety of OPF-related problems; a recent review can be found in Khaloie et al. [13]. However, for ML-based OPF solutions to be applied in real power grid operations, they must be reliable and robust. A common shortcoming in this regard is infeasibility with respect to constraints of the original problem formulation. This can be tackled in a number of ways, for example by post-processing model outputs [14] or directly during learning [15]. Another basic requirement for operations is robustness to grid topology variation, either for contingency analysis [16], due to planned addition or removal of grid components, network topology switching, or unplanned outages [17]. Graph-based models are naturally suited to this requirement, since their structure reflects the relational structure of the data [18, 19, 20].

Despite the interest in the field, there are few standardised datasets available. As a result, the typical approach is for researchers to generate their own; due to computational complexity this can involve substantial investments of compute time for large grids or where discrete decision variables are present. One exception known to the authors is the freely-available OPF-Learn dataset [21], which is generated using a method designed to maximise the variety of active constraint sets in the solutions; pre-generated datasets are available online for small grid sizes (up to 118 buses). OPF-Learn and other recent research into efficient sampling of the feasible set [e.g. 22, 23] shows promise for improving model results for a given dataset size. However, it is an open question how best to extend these techniques to more general settings such as datasets with topological variation, where each example in the dataset could have a different feasible set. A second freely-available dataset is the TAS-97 dataset, which contains realistic load patterns on a realistic grid modelling Tasmania's electricity network [24]. This dataset captures realistic correlations between loads; however, the number of samples (7284) and grid size (97 buses) are both small. Our findings, and those of the review by Khaloie et al. [13], are that adaptability to network variation, scalability to large grids and large datasets, and the lack of standardized datasets and benchmarking platforms remain key challenges in the field.

## 2. The OPFData dataset

In this paper we introduce OPFData, a collection of open datasets for research into ML methods for solving AC-OPF, aiming to assist with addressing some of the challenges identified above. Each example within the datasets is a self-contained OPF problem with solution, allowing for complete flexibility to represent different grid structures and properties between examples. It is our view that models for operational application must be able to gracefully handle and learn from variable grid topology specifications. This is true from both from a pragmatic standpoint—because the grid constantly varies—and an application-specific one, for example for contingency screening. Hence we include datasets with topological perturbations.

OPFData consists of 300k solved AC-OPF problems for each of a range of grids, making it the largest of such datasets openly available. Grid sizes range up to 13659 buses. Problems are based on the base test cases from the widely-used PGLib-OPF library [31]. We select a number of commonly-used grids spanning a range of sizes, and for each grid we present two datasets:

• **FullTop:** This is a simple model for a fixed grid with variable load conditions. We multiply each active and reactive load value independently by a random number drawn uniformly from [0.8, 1.2], similar to e.g. Fioretto, Mak, and Van Hentenryck [15].

• **N-1:** This is a simple model for a variable grid with variable load conditions. We perturb load as above, and additionally (with probability 0.5) choose a single generator uniformly at random to drop, or (with probability 0.5) choose a single line/transformer uniformly at random to drop. Components which are dropped are removed entirely from the network specification. We do not drop generators connected to reference buses, and we do not drop a component if doing so would result in a disconnected graph.

Some of the perturbations above lead to infeasible problems, which are discarded. Out of the five core variability factors identified in Popli et al. [17] for building ML-OPF datasets (load distribution, load power factor, generator outages, line outages, generator costs), the above covers all but generator costs, which we leave to future iterations. The datasets are summarised in table 1; a detailed description is given in appendix A.

The OPFData datasets are distributed as JSON files, available in a public Google Cloud bucket (`gs://gridopt-dataset/`), and are agnostic to ML frameworks or model architectures. In Piloto et al. [32] we apply a graph-based model written in JAX [33] and jraph [34] to equivalent datasets, including detailed consideration of constraint satisfaction metrics¹.

### Table 1 | Summary of the OPFData datasets

| Scenario | |N| | |G| | |D| | |S| | |E_l| | |E_t| |
|----------|-----|-----|-----|-----|-------|-------|
| pglib_opf_case14_ieee [25] | 14 | 5 | 11 | 1 | 17 | 3 |
| pglib_opf_case30_ieee [25] | 30 | 6 | 21 | 2 | 34 | 7 |
| pglib_opf_case57_ieee [25] | 57 | 7 | 42 | 3 | 63 | 17 |
| pglib_opf_case118_ieee [25] | 118 | 54 | 99 | 14 | 175 | 11 |
| pglib_opf_case500_goc [26, 27] | 500 | 171 | 281 | 31 | 536 | 192 |
| pglib_opf_case2000_goc [26, 27] | 2000 | 238 | 1010 | 124 | 2737 | 896 |
| pglib_opf_case4661_sdet [28] | 4661 | 724 | 2683 | 696 | 4668 | 1329 |
| pglib_opf_case6470_rte [29] | 6470 | 761 | 3670 | 73 | 7426 | 1579 |
| pglib_opf_case10000_goc [26, 27] | 10000 | 2016 | 3984 | 510 | 10819 | 2374 |
| pglib_opf_case13659_pegase [29, 30] | 13659 | 4092 | 5544 | 8754 | 13792 | 6675 |

*Table details: Base scenario from PGLib-OPF with original source citation, and number of buses |N|, generators |G|, loads |D|, shunts |S|, and edges |E_l| (AC lines), |E_t| (transformers). Each dataset consists of 300k examples and has FullTop and N-1 variants (so there are 20 datasets in total).*

¹Note that the TopDrop dataset from Piloto et al. [32] can be imitated with a 50-50 mix of the OPFData FullTop and N-1 datasets.

## 3. Summary and future work

We have presented OPFData, an openly-available collection of datasets of solved AC-OPF problems in a format amenable to common ML workflows. Taken together, OPFData is the largest of such solved and openly-available datasets in terms of number of examples, number of grids, and grid sizes. We hope to encourage researchers to explore this fascinating and important field, and particularly to scale methods to large grids with topological variations.

While we believe these datasets are useful as-is, there are several dimensions of improvement possible:

• A more efficient or representative exploration of the feasible space. One example could be a more sophisticated distribution of load perturbations, for example a truncated normal [14, 35]. Another could be a scheme such as the one presented by Joswig-Jones, Baker, and Zamzam [21], aiming to explore the space of active constraint sets more thoroughly than a simple perturbation.

• Further non-topological perturbations; for example perturbing generator capacities or line properties, or generator costs to generalise to different fuel prices.

• Further topological perturbations; for example dropping more than one component, adding additional lines, or re-configuring existing lines.

• Further output features. For example active constraint sets of the OPF solution could be used by classification models [13], or dual solutions could be used to learn models which output locational marginal prices [19].

## References

[1] IEA. World Energy Outlook 2023. Paris: IEA, 2023.

[2] Florin Capitanescu. "Critical review of recent advances and further developments needed in AC optimal power flow". In: Electric Power Systems Research 136 (2016), pp. 57–68.

[3] Hongye Wang, Carlos E. Murillo-Sanchez, Ray D. Zimmerman, and Robert J. Thomas. "On Computational Issues of Market-Based Optimal Power Flow". In: IEEE Transactions on Power Systems 22.3 (2007), pp. 1185–1193.

[4] Zhifang Yang, Haiwang Zhong, Anjan Bose, Tongxin Zheng, Qing Xia, and Chongqing Kang. "A Linearized OPF Model With Reactive Power and Voltage Magnitude: A Pathway to Improve the MW-Only DC OPF". In: IEEE Transactions on Power Systems 33.2 (2018), pp. 1734–1745.

[5] Mary B Cain, Richard P O' Neill, and Anya Castillo. History of Optimal Power Flow and Formulations. Tech. rep. 2012.

[6] Calla Winner, Jasmine Garland, Constance Crozier, and Kyri Baker. "Carbon Emissions Resulting from Different Power Flow Models for Dispatch". In: 2023 IEEE Power & Energy Society General Meeting (PESGM). 2023, pp. 1–5.

[7] Kyri Baker. "Solutions of DC OPF are Never AC Feasible". In: Proceedings of the Twelfth ACM International Conference on Future Energy Systems. e-Energy '21. Virtual Event, Italy: Association for Computing Machinery, 2021, pp. 264–268.

[8] S. Surender Reddy, P. R. Bijwe, and A. R. Abhyankar. "Real-Time Economic Dispatch Considering Renewable Power Generation Variability and Uncertainty Over Scheduling Period". In: IEEE Systems Journal 9.4 (2015), pp. 1440–1451.

[9] Xingpeng Li and Qianxue Xia. "Stochastic Optimal Power Flow with Network Reconfiguration: Congestion Management and Facilitating Grid Integration of Renewables". In: 2020 IEEE/PES Transmission and Distribution Conference and Exposition (T&D). 2020, pp. 1–5.

[10] Luo Xu et al. "Resilience of renewable power systems under climate risks". In: Nature Reviews Electrical Engineering 1.1 (2024), pp. 53–66.

[11] Jinil Han and Anthony Papavasiliou. "Congestion management through topological corrections: A case study of Central Western Europe". In: Energy Policy 86 (2015), pp. 470–482.

[12] David Rolnick et al. "Tackling Climate Change with Machine Learning". In: ACM Comput. Surv. 55.2 (Feb. 2022).

[13] Hooman Khaloie, Mihaly Dolanyi, Jean-Francois Toubeau, and François Vallée. "Review of Machine Learning Techniques for Optimal Power Flow". In: Available at SSRN 4681955 (2024).

[14] Ahmed S. Zamzam and Kyri Baker. "Learning Optimal Solutions for Extremely Fast AC Optimal Power Flow". In: 2020 IEEE International Conference on Communications, Control, and Computing Technologies for Smart Grids (SmartGridComm). 2020, pp. 1–6.

[15] Ferdinando Fioretto, Terrence W.K. Mak, and Pascal Van Hentenryck. "Predicting AC Optimal Power Flows: Combining Deep Learning and Lagrangian Dual Methods". In: Proceedings of the AAAI Conference on Artificial Intelligence 34.01 (Apr. 2020), pp. 630–637.

[16] G. C. Ejebe and B. F. Wollenberg. "Automatic Contingency Selection". In: IEEE Transactions on Power Apparatus and Systems PAS-98.1 (1979), pp. 97–109.

[17] Nipun Popli, Elnaz Davoodi, Florin Capitanescu, and Louis Wehenkel. "On the robustness of machine-learnt proxies for security constrained optimal power flow solvers". In: Sustainable Energy, Grids and Networks 37 (2024), p. 101265.

[18] Thomas Falconer and Letif Mones. "Leveraging Power Grid Topology in Machine Learning Assisted Optimal Power Flow". In: IEEE Transactions on Power Systems 38.3 (2023), pp. 2234–2246.

[19] Shaohui Liu, Chengyang Wu, and Hao Zhu. "Topology-Aware Graph Neural Networks for Learning Feasible and Adaptive AC-OPF Solutions". In: IEEE Transactions on Power Systems 38.6 (2023), pp. 5660–5670.

[20] Agnes M Nakiganda, Catherine Cheylan, and Spyros Chatzivasileiadis. Topology-Aware Neural Networks for Fast Contingency Analysis of Power Systems. 2023. arXiv: 2310.04213.

[21] Trager Joswig-Jones, Kyri Baker, and Ahmed S. Zamzam. "OPF-Learn: An Open-Source Framework for Creating Representative AC Optimal Power Flow Datasets". In: 2022 IEEE Power & Energy Society Innovative Smart Grid Technologies Conference (ISGT). 2022, pp. 1–5.

[22] Ignasi Ventura Nadal and Samuel Chevalier. "Scalable Bilevel Optimization for Generating Maximally Representative OPF Datasets". In: Proceedings of 2023 IEEE PES Innovative Smart Grid Technologies Europe (ISGT EUROPE). United States: IEEE, 2024.

[23] Zuntao Hu and Hongcai Zhang. Optimal Power Flow Based on Physical-Model-Integrated Neural Network with Worth-Learning Data Generation. 2023. arXiv: 2301.03766.

[24] Tsun Ho Aaron Cheung, Min Zhou, and Minghua Chen. Learning-based AC-OPF Solvers on Realistic Network and Realistic Loads. 2022. arXiv: 2205.09452 [cs.LG].

[25] Dept. of Electrical Engineering University of Washington. Power systems test case archive. 1999.

[26] Grid Optimization Competition. Grid optimization competition datasets. 2018.

[27] Adam B Birchfield, Ti Xu, Kathleen M Gegner, Komal S Shetye, and Thomas J Overbye. "Grid structural characteristics as validation criteria for synthetic networks". In: IEEE Transactions on Power Systems 32.4 (2016), pp. 3258–3265.

[28] Sustainable Data Evolution Technology. SDET transmission models. 2018.

[29] Cédric Josz, Stéphane Fliscounakis, Jean Maeght, and Patrick Panciatici. AC Power Flow Data in MATPOWER and QCQP Format: iTesla, RTE Snapshots, and PEGASE. 2016. arXiv: 1603.01533 [math.OC].

[30] Stéphane Fliscounakis, Patrick Panciatici, Florin Capitanescu, and Louis Wehenkel. "Contingency Ranking With Respect to Overloads in Very Large Power Systems Taking Into Account Uncertainty, Preventive, and Corrective Actions". In: IEEE Transactions on Power Systems 28.4 (2013), pp. 4909–4917.

[31] Sogol Babaeinejadsarookolaee et al. The Power Grid Library for Benchmarking AC Optimal Power Flow Algorithms. 2021. arXiv: 1908.02788.

[32] Luis Piloto, Sofia Liguori, Sephora Madjiheurem, Miha Zgubic, Sean Lovett, Hamish Tomlinson, Sophie Elster, Chris Apps, and Sims Witherspoon. CANOS: A Fast and Scalable Neural AC-OPF Solver Robust To N-1 Perturbations. 2024. arXiv: 2403.17660 [cs.LG].

[33] James Bradbury et al. JAX: composable transformations of Python+NumPy programs. 2018.

[34] Jonathan Godwin, Thomas Keck, Peter Battaglia, Victor Bapst, Thomas Kipf, Yujia Li, Kimberly Stachenfeld, Petar Veličković, and Alvaro Sanchez-Gonzalez. Jraph: A library for graph neural networks in JAX. 2020.

[35] Seonho Park, Wenbo Chen, Terrence W.K. Mak, and Pascal Van Hentenryck. "Compact Optimization Learning for AC Optimal Power Flow". In: IEEE Transactions on Power Systems 39.2 (2024), pp. 4350–4359.

[36] Jeff Bezanson, Alan Edelman, Stefan Karpinski, and Viral B Shah. "Julia: A fresh approach to numerical computing". In: SIAM review 59.1 (2017), pp. 65–98.

[37] Carleton Coffrin, Russell Bent, Kaarthik Sundar, Yeesian Ng, and Miles Lubin. "PowerModels.jl: An Open-Source Framework for Exploring Power Flow Formulations". In: 2018 Power Systems Computation Conference (PSCC). June 2018, pp. 1–8.

[38] Andreas Wächter and Lorenz T Biegler. "On the implementation of an interior-point filter line-search algorithm for large-scale nonlinear programming". In: Mathematical programming 106 (2006), pp. 25–57.

[39] Patrick R. Amestoy, Iain S. Duff, Jean-Yves L'Excellent, and Jacko Koster. "MUMPS: A General Purpose Distributed Memory Sparse Solver". In: Applied Parallel Computing. New Paradigms for HPC in Industry and Academia. Ed. by Tor Sørevik, Fredrik Manne, Assefaw Hadish Gebremedhin, and Randi Moe. Berlin, Heidelberg: Springer Berlin Heidelberg, 2001, pp. 121–130.

## Appendix A. Detailed description of the datasets

OPFData is available in a public Google Cloud bucket (`gs://gridopt-dataset/`). For licensing and other general information see the LICENSE and README files in that bucket.

OPFData is based on the widely-used PGLib-OPF datasets [31]. AC-OPF problems were solved using the Julia language [36] with PowerModels.jl [37] and the Ipopt [38] and MUMPS [39] solvers. Figure 1 shows the AC-OPF formulation, taken from PowerModels.jl; see the ACPPowerModel in PowerModels.jl documentation for full details.

Each example in the dataset is a JSON file having the structure shown in listing 1. At the root are `grid`, representing the grid state (OPF inputs); `solution`, representing the OPF solution, and `metadata`, containing metadata about the example. The canonical dataset split for OPFData is a train / validate / test split of 0.9 / 0.05 / 0.05, resulting in 270k / 15k / 15k examples. The examples are i.i.d. and are taken sequentially, i.e. the train set consists of `example_{0-26999}.json`, the validation set of `example_{270000-284999}.json`, and the test set of `example_{285000-299999}.json`.

### Listing 1 | Structure of the dataset JSON files

```json
{
  "grid": {
    "nodes": {
      "bus": ...,
      "generator": ...,
      "load": ...,
      "shunt": ...
    },
    "edges": {
      "ac_line": {
        "senders": ...,
        "receivers": ...,
        "features": ...
      },
      "transformer": {
        "senders": ...,
        "receivers": ...,
        "features": ...
      },
      "generator_link": {
        "senders": ...,
        "receivers": ...
      },
      "load_link": {
        "senders": ...,
        "receivers": ...
      },
      "shunt_link": {
        "senders": ...,
        "receivers": ...
      }
    },
    "context": ...
  },
  "solution": {
    "nodes": {
      "bus": ...,
      "generator": ...
    },
    "edges": {
      "ac_line": {
        "senders": ...,
        "receivers": ...,
        "features": ...
      },
      "transformer": {
        "senders": ...,
        "receivers": ...,
        "features": ...
      }
    }
  },
  "metadata": {
    "objective": ...
  }
}
```

The `grid` and `solution` are split into nodes and edges. Nodes are split into several types containing feature matrices where the rows correspond to the entity number, and the columns to features. Edges are split into AC lines and transformers, and the senders (from) and receivers (to) additionally contain integer indices corresponding to the connected entities²:

• **ac_line** indicates a line connecting a bus to a bus;
• **transformer** indicates a transformer connecting a bus to a bus;
• **generator_link** indicates a line connecting a generator (sender) to a bus (receiver);
• **load_link** indicates a line connecting a load (sender) to a bus (receiver);
• **shunt_link** indicates a line connecting a shunt (sender) to a bus (receiver).

²The generator, load and shunt nodes are the "subnodes" from Piloto et al. [32], and generator_link, load_link, shunt_link the corresponding artificial (subnode-bus) edges.

### Feature Descriptions

The features, in column order in each case, are given below. Symbols refer to the formulation in figure 1. These correspond to a subset of features in a PowerModels.jl network [37]. Unless otherwise specified, parameters are in per-unit and angles are in radians.

#### grid.nodes.bus:
- **base_kv**: Base voltage (kV)
- **bus_type**: PQ (1), PV (2), reference (3), inactive (4)
- **vmin** (v^l_i): Minimum voltage magnitude
- **vmax** (v^u_i): Maximum voltage magnitude

#### grid.nodes.generator:
- **mbase**: Total MVA base
- **pg**: Initial real power generation as given in the pglib case
- **pmin**: (ℜ(S^gl_k)) Minimum real power generation
- **pmax**: (ℜ(S^gu_k)) Maximum real power generation
- **qg**: Initial reactive power generation as given in the pglib case
- **qmin**: (ℑ(S^gl_k)) Minimum reactive power generation
- **qmax**: (ℑ(S^gu_k)) Maximum reactive power generation
- **vg**: Initial voltage magnitude as given in the pglib case
- **cost_squared**: (c2k) Coefficient of pg² in cost term
- **cost_linear**: (c1k) Coefficient of pg in cost term
- **cost_offset**: (c0k) Constant coefficient in cost term

**Note**: In the processed PyG data, generator features are aggregated by bus and included in node features as `[P_gen, Q_gen, P_gen_min, P_gen_max, Q_gen_min, Q_gen_max]` for region conservation loss support.

#### grid.nodes.load:
- **pd**: (ℜ(S^d_k)) Real power demand (perturbed in dataset)
- **qd**: (ℑ(S^d_k)) Reactive power demand (perturbed in dataset)

#### grid.nodes.shunt:
- **bs**: (ℑ(Y^s_k)) Shunt susceptance
- **gs**: (ℜ(Y^s_k)) Shunt conductance

#### grid.edges.ac_line.features:
- **angmin**: (θ^Δl_ij) Minimum angle difference between from and to bus (radians)
- **angmax**: (θ^Δu_ij) Maximum angle difference between from and to bus (radians)
- **b_fr**: (ℑ(Y^c_ij)) Line charging susceptance at from bus
- **b_to**: (ℑ(Y^c_ji)) Line charging susceptance at to bus
- **br_r**: (ℜ(1/Y_ij)) Branch series resistance
- **br_x**: (ℑ(1/Y_ij)) Branch series reactance
- **rate_a**: (s^u_ij) Long term thermal line rating
- **rate_b**: Short term thermal line rating
- **rate_c**: Emergency thermal line rating

#### grid.edges.transformer.features:
- **angmin**: (θ^Δl_ij) Minimum angle difference between from and to bus
- **angmax**: (θ^Δu_ij) Maximum angle difference between from and to bus
- **br_r**: (ℜ(1/Y_ij)) Branch series resistance
- **br_x**: (ℑ(1/Y_ij)) Branch series reactance
- **rate_a**: (s^u_ij) Long term thermal line rating
- **rate_b**: Short term thermal line rating
- **rate_c**: Emergency thermal line rating
- **tap**: (|T_ij|) Branch off nominal turns ratio
- **shift**: (∠T_ij) Branch phase shift angle
- **b_fr**: (ℑ(Y^c_ij)) Line charging susceptance at from bus
- **b_to**: (ℑ(Y^c_ji)) Line charging susceptance at to bus

#### grid.context:
- **baseMVA**: The system wide MVA value for converting between mixed-units and p.u. unit values

#### solution.nodes.bus:
- **va**: (∠(V_iV*_j)) Voltage angle
- **vm**: (|V_i|) Voltage magnitude

#### solution.nodes.generator:
- **pg**: (ℜ(S^g_k)) Real power generation
- **qg**: (ℑ(S^g_k)) Reactive power generation

#### solution.edges.ac_line.features:
- **pt**: (ℜ(S_ji)) Active power withdrawn at the to bus
- **qt**: (ℑ(S_ji)) Reactive power withdrawn at the to bus
- **pf**: (ℜ(S_ij)) Active power withdrawn at the from bus
- **qf**: (ℑ(S_ij)) Reactive power withdrawn at the from bus

#### solution.edges.transformer.features:
- **pt**: Active power withdrawn at the to bus
- **qt**: Reactive power withdrawn at the to bus
- **pf**: Active power withdrawn at the from bus
- **qf**: Reactive power withdrawn at the from bus

#### metadata:
- **objective**: AC-OPF objective achieved by conventional solver ($/h)

### Figure 1 | AC-OPF problem formulation

**Sets:**
- N - buses
- R - reference buses
- E, E^R - branches, forward and reverse orientation
- G, G_i - generators and generators at bus i
- L, L_i - loads and loads at bus i
- S, S_i - shunts and shunts at bus i

**Data:**
- S^gl_k, S^gu_k ∀k ∈ G - generator complex power bounds
- c2k, c1k, c0k ∀k ∈ G - generator cost components
- v^l_i, v^u_i ∀i ∈ N - voltage bounds
- S^d_k ∀k ∈ L - load complex power consumption
- Y^s_k ∀k ∈ S - bus shunt admittance
- Y_ij, Y^c_ij, Y^c_ji ∀(i,j) ∈ E - branch pi-section parameters
- T_ij ∀(i,j) ∈ E - branch complex transformation ratio
- s^u_ij ∀(i,j) ∈ E - branch apparent power limit
- θ^Δl_ij, θ^Δu_ij ∀(i,j) ∈ E - branch voltage angle difference bounds

**Variables:**
- S^g_k ∀k ∈ G - generator complex power dispatch
- V_i ∀i ∈ N - bus complex voltage
- S_ij ∀(i,j) ∈ E ∪ E^R - branch complex power flow

**Minimize:**
∑_k∈G c2k(ℜ(S^g_k))² + c1k ℜ(S^g_k) + c0k

**Subject to:**
- ∠V_r = 0 ∀r ∈ R
- S^gl_k ≤ S^g_k ≤ S^gu_k ∀k ∈ G
- v^l_i ≤ |V_i| ≤ v^u_i ∀i ∈ N
- ∑_k∈G_i S^g_k - ∑_k∈L_i S^d_k - ∑_k∈S_i (Y^s_k)* |V_i|² = ∑_(i,j)∈E_i∪E^R_i S_ij ∀i ∈ N
- S_ij = ((Y_ij + Y^c_ij)* |V_i|²)/|T_ij|² - Y*_ij (V_i V*_j)/T_ij ∀(i,j) ∈ E
- S_ji = (Y_ij + Y^c_ji)* |V_j|² - Y*_ij (V*_i V_j)/T*_ij ∀(i,j) ∈ E
- |S_ij| ≤ s^u_ij ∀(i,j) ∈ E ∪ E^R
- θ^Δl_ij ≤ ∠(V_i V*_j) ≤ θ^Δu_ij ∀(i,j) ∈ E

*Note: the branch current limit constraint is not included here as this is not present in the pglib cases.*

---

© 2024 Google DeepMind. All rights reserved